<?xml version="1.0"?>

<launch>

    <arg name="scenario" default="sml" /> <!-- Empty scenario to make sure it is consistent if required -->
    <arg name="scenario_path" default="/home/sml/tiago_public_ws/src/rqt_simulation_gui/sml/" />

    <arg name="3d_sensor" default="$(env TURTLEBOT_3D_SENSOR)"/>

    <arg name="robot_name" default="/" />
    <arg name="initial_pose_x" default="0" />
    <arg name="initial_pose_y" default="0" />
    <arg name="initial_pose_a" default="0" />

    <arg name="custom_amcl_launch_file" default="$(find turtlebot_navigation)/launch/includes/amcl/$(arg 3d_sensor)_amcl.launch.xml"/>

    <group ns="$(arg robot_name)">


        <!-- Map server -->
        <arg name="map_file" default="/home/sml/tiago_public_ws/src/rqt_simulation_gui/sml/sml_map.yaml"/>
        <node name="map_server" pkg="map_server" type="map_server" args="$(arg map_file)" />

        <!-- AMCL -->
        <include file="$(arg custom_amcl_launch_file)">
          <arg name="initial_pose_x" value="$(arg initial_pose_x)"/>
          <arg name="initial_pose_y" value="$(arg initial_pose_y)"/>
          <arg name="initial_pose_a" value="$(arg initial_pose_a)"/>
        </include>

        <!-- Move base -->
        <arg name="custom_param_file" default="$(find turtlebot_navigation)/param/$(arg 3d_sensor)_costmap_params.yaml"/>
        <include file="$(find turtlebot_navigation)/launch/includes/move_base.launch.xml">
          <arg name="custom_param_file" value="$(arg custom_param_file)"/>
      </include>

      <node name="rviz" pkg="rviz" type="rviz" args="-d $(find turtlebot_rviz_launchers)/rviz/navigation.rviz"/>

    </group>

</launch>
